<!DOCTYPE html>
<html>

<head>
    <title>itsvismay.github.io</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    
        <title>Discrete Calculus of Variations Derivation for Crowds</title>
    

    <meta name="description" content="me">

    

    <link rel="icon" href="/assets/img/blog.png">
    <link href="https://fonts.googleapis.com/css?family=Alegreya|Roboto|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css">

    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Discrete Calculus of Variations Derivation for Crowds | Itsvismay.Github.Io</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Discrete Calculus of Variations Derivation for Crowds" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Setup here" />
<meta property="og:description" content="Setup here" />
<link rel="canonical" href="http://localhost:4000/notes/DiscreteCoVCrowds" />
<meta property="og:url" content="http://localhost:4000/notes/DiscreteCoVCrowds" />
<meta property="og:site_name" content="Itsvismay.Github.Io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-10-31T19:00:00-05:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/notes/DiscreteCoVCrowds"},"url":"http://localhost:4000/notes/DiscreteCoVCrowds","headline":"Discrete Calculus of Variations Derivation for Crowds","description":"Setup here","dateModified":"2020-10-31T19:00:00-05:00","datePublished":"2020-10-31T19:00:00-05:00","@type":"BlogPosting","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

    <div class="wrapper">
        <div class="header">
    <h1><a href="/">Home</a></h1>
    <ul>
        
        <li>
            <a href="/me">About</a>
        </li>
        
        <li>
            <a href="/projects">Projects</a>
        </li>
        
        <li>
            <a href="/notes">Notes</a>
        </li>
        
    </ul>
</div>

<div class="post">

    <div class="post__title">
    	<h1>Discrete Calculus of Variations Derivation for Crowds</h1>
    </div>
    <div class="post__subtitle">
      <h2></h2>
    </div>
    <div class="post__date">
    	<p>October 31, 2020</p>
    </div>
    <div class="post__meta">
    	<p></p>
    </div>
    <div class="post__content"?>
        <h2 id="setup-here">Setup here</h2>

<p>An agents path through time, $t$ and space, $x = [x_1,x_2]$, denoted as space-time coordinates $q = [x_1,x_2, t]$, is represented by the curve $s$ . This curve is discretized by segments $e$. Each piece-wise constant rod segment encodes a scalar cost for the agent, which for now, is just kinetic energy, or $\frac{1}{2}mv^2$. The goal is to use CoV to find an optimal curve that maximizes total utility for the agent (minimizes kinetic energy over the path).</p>

<figure class="image" style="font-style: italic;">
	<img src="../assets/img/2020-10-31-DiscreteCoVCrowds/2020-11-01-01-30-06.png" alt="Curve (s) is broken up into segments (e) which represents piece-wise constant agent motion." style="width: 100%;" />
	<figcaption style="width: 50%; padding-left: 25%">Curve (s) is broken up into segments (e) which represents piece-wise constant agent motion.</figcaption>
</figure>

<p>The discrete Lagrangian for each segment of the rod (just kinetic energy) can be written as</p>

<script type="math/tex; mode=display">L = \frac{1}{2}m(\frac{x_1 - x_0}{t_1 - t_0})^2 \Delta t</script>

<p>where $m$ is the mass, $x_i$ and $t_i$ are the spatial and time coordinates of the two ends of the piece-wise constant segment. For each segment we can interpolate $q(s) = q_0 +  s (q_1 - q_0)$. So, individually for space and time,</p>

<script type="math/tex; mode=display">x = x_0 + s(x_1 - x_0) = x_0 + s\Delta x</script>

<p>and</p>

<script type="math/tex; mode=display">t = t_0 + s(t_1 - t_0) = t_0 + s\Delta t</script>

<p>So, after discretizing the curve, hamilton’s principle of least action can be written as</p>

<script type="math/tex; mode=display">S = \sum_{e=0}^{|e|-1} L(\Delta s, q_e, q_{e+1}) = \sum_{e=1}^{|e|-1} \frac{1}{2}m(\frac{x_{e+1} - x_e}{t_{e+1} - t_e})^2 (t_{e+1} - t_e)\tag{1}</script>

<p>Discrete CoV requires that the variation for the optimal rod be 0, so</p>

<script type="math/tex; mode=display">\delta S = \delta \sum_{e=0}^{e = n-1} [D_2 L(\Delta s, q_e, q_{e+1})\cdot \delta q_e + D_3 L(\Delta s, q_e, q_{e+1})\cdot\delta q_{e+1}] = 0 \tag{2}</script>

<h2 id="boundary-conditions">Boundary Conditions</h2>
<p>After re-arranging and accounting for B.C.</p>

<script type="math/tex; mode=display">\delta S = \delta \sum_{e=1}^{e = n-1} [D_3 L(\Delta s, q_{e-1}, q_e) + D_2 L(\Delta s, q_e, q_{e+1})]\cdot\delta q_{e} \\ + D_2 L(\Delta s, q_0, q_1)\cdot \delta q_0 + D_3 L(\Delta s, q_{n -1}, q_{n})\cdot \delta q_{n}  = 0 \tag{3}</script>

<p>Since, we don’t want to fix the endpoint of the curve in time (only in space), our boundary condition is a bit funny, $\delta t_{n}  = unknown$, which means that $D_3 L(\Delta s, q_{n -1}, q_n) = 0$ wrt $t_n$.</p>

<p>So we get the regular boundary conditions $\delta q_0 = 0$ (since it is known), $\delta x_n = 0$ (since its known), and finally, since $\delta t_n = ?$,</p>

<script type="math/tex; mode=display">\frac{-m (x_{n} - x_{n-1})^2}{2(t_{n} - t_{n -1})^2} = 0</script>

<p>which means that the agent should stop by $t_n$.</p>

<h2 id="minimizing-the-functional">Minimizing the functional</h2>

<p>Since variation $\delta S = 0$ at the optimal function, we know the gradients</p>

<script type="math/tex; mode=display">D_3 L(\Delta s, q_{e-1}, q_e) + D_2 L(\Delta s, q_e, q_{e+1}) = \frac{\partial L(\Delta s, q_{e-1}, q_e)}{\partial q_e} + \frac{\partial L(\Delta s, q_e, q_{e+1})}{\partial q_e} = 0</script>

<p>are zero. This will need to be done component-wise, since $q = [x, t]$.</p>

<script type="math/tex; mode=display">\frac{\partial L(\Delta s, q_{e-1}, q_e)}{\partial q_e} + \frac{\partial L(\Delta s, q_e, q_{e+1})}{\partial q_e} = [\frac{\partial L(\Delta s, q_{e-1}, q_e)}{\partial x_e}, \frac{\partial L(\Delta s, q_{e-1}, q_e)}{\partial t_e}] + [\frac{\partial L(\Delta s, q_e, q_{e+1})}{\partial x_e}, \frac{\partial L(\Delta s, q_e, q_{e+1})}{\partial t_e}]</script>

<p>then</p>

<script type="math/tex; mode=display">[\frac{m(x_e - x_{e-1})}{t_e - t_{e-1}}, \frac{m(x_e - x_{e-1})^2}{2(t_e - t_{e-1})^2}] + [\frac{-m(x_{e+1} - x_e)}{t_{e+1} - t_e}, \frac{-m(x_{e+1} - x_e)^2}{2(t_{e+1} - t_{e})^2}] = 0</script>

<p>so</p>

<script type="math/tex; mode=display">[\frac{m(x_e - x_{e-1})}{t_e - t_{e-1}}, \frac{m(x_e - x_{e-1})^2}{2(t_e - t_{e-1})^2}] = [\frac{m(x_{e+1} - x_e)}{t_{e+1} - t_e}, \frac{m(x_{e+1} - x_e)^2}{2(t_{e+1} - t_{e})^2}]</script>

<p>which means that the kinetically optimal path for the agent is to have constant velocity until it reaches the end position. Which makes sense.</p>

    </div>
</div>

        <div class="footer">
            <p title="Took this theme from here: http://erictreacy.me">&copy; 2018 </p>
        </div>
    </div>

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            processEscapes: true
          }
        });
      </script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"> </script>
</body>

</html>
